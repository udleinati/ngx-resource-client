{"version":3,"file":"path-collection-builder.js","sourceRoot":"","sources":["../../src/services/path-collection-builder.ts"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,WAAW,EAAE,MAAM,gBAAgB,CAAC;AAG7C,OAAO,EAAE,gBAAgB,EAAE,MAAM,sBAAsB,CAAC;AACxD,OAAO,EAAE,IAAI,EAAE,MAAM,SAAS,CAAC;AAE/B,MAAM,4BAA6B,SAAQ,WAAW;;;;;;IAC3C,WAAW,CAAC,OAAgB,EAAE,SAA4B,EAAE;QAC/D,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;;QAEnC,IAAI,SAAS,GAAG,IAAI,gBAAgB,EAAE,CAAC;QACvC,IAAI,MAAM,CAAC,YAAY,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE;YACpE,IAAI,OAAO,CAAC,aAAa,EAAE;gBACvB,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;aAC9C;YACD,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE,MAAM,EAAE,MAAM,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;SACtE;QACD,IAAI,MAAM,CAAC,IAAI,EAAE;YACb,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;gBACxB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,MAAM,GAAG,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aACzE;YACD,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE;gBAClB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,IAAI,GAAG,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACrE;SACJ;QACD,IAAI,MAAM,CAAC,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE;YACnC,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;SAClD;;;;;IAGG,aAAa;QACjB,OAAO,CACH,CAAC,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,UAAU,IAAI,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI;YAC3G,MAAM,EAAE,QAAQ;YAChB,IAAI,EAAE,MAAM;SACf,CACJ,CAAC;;;;;;IAGI,QAAQ,CAAC,KAAa;QAC5B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAC/B;CACJ","sourcesContent":["import { PathBuilder } from './path-builder';\nimport { IParamsCollection } from '../interfaces';\nimport { Service } from '../service';\nimport { UrlParamsBuilder } from './url-params-builder';\nimport { Core } from '../core';\n\nexport class PathCollectionBuilder extends PathBuilder {\n    public applyParams(service: Service, params: IParamsCollection = {}) {\n        super.applyParams(service, params);\n\n        let paramsurl = new UrlParamsBuilder();\n        if (params.remotefilter && Object.keys(params.remotefilter).length > 0) {\n            if (service.parseToServer) {\n                service.parseToServer(params.remotefilter);\n            }\n            this.addParam(paramsurl.toparams({ filter: params.remotefilter }));\n        }\n        if (params.page) {\n            if (params.page.number > 1) {\n                this.addParam(this.getPageConfig().number + '=' + params.page.number);\n            }\n            if (params.page.size) {\n                this.addParam(this.getPageConfig().size + '=' + params.page.size);\n            }\n        }\n        if (params.sort && params.sort.length) {\n            this.addParam('sort=' + params.sort.join(','));\n        }\n    }\n\n    private getPageConfig(): { number: string; size: string } {\n        return (\n            (Core.injectedServices.rsJsonapiConfig.parameters && Core.injectedServices.rsJsonapiConfig.parameters.page) || {\n                number: 'number',\n                size: 'size'\n            }\n        );\n    }\n\n    protected addParam(param: string): void {\n        this.get_params.push(param);\n    }\n}\n"]}